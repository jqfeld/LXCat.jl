using LXCat, Dates, Test

string = """
SPECIES: Ar^+ / Ar
PROCESS: Ar+ + Ar -> , Backscat
PARAM.:  Mi = 39.948, Mi/M = 1, complete set
COMMENT: Ar+ in Ar: Phelps, J. Appl. Phys. 76, 747 (1994).
COMMENT: 0.5*(1.15E-18*(1.+0.015/2./col(A))^0.6/(2.*col(A))^0.1-2E-19/(2.*col(A))^0.5/(1.+2.*col(A))-3E-19*2.*col(A)/(1.+2.*col(A)/3.)^2.3).
UPDATED: 2011-10-30 07:03:24
COLUMNS: Energy (eV) | Cross section (m2)
-----------------------------
 0.000000e+0	1.104590e-17
 1.000000e-4	1.104590e-17
 1.200000e-4	9.516760e-18
 1.400000e-4	8.384720e-18
 2.200000e-4	5.764980e-18
 3.700000e-2	4.806000e-19
 8.800000e-2	4.926560e-19
 1.000000e-1	4.931580e-19
 1.200000e-1	4.929950e-19
 1.900000e+2	3.166380e-19
 2.200000e+2	3.121590e-19
 2.600000e+2	3.071090e-19
 3.100000e+2	3.018560e-19
 3.700000e+2	2.966440e-19
 4.400000e+2	2.916130e-19
 5.200000e+2	2.868310e-19
 6.200000e+2	2.818720e-19
 7.400000e+2	2.769620e-19
 8.800000e+2	2.722300e-19
 1.000000e+3	2.687880e-19
 1.200000e+3	2.639510e-19
 1.400000e+3	2.599260e-19
 1.600000e+3	2.564870e-19
 1.900000e+3	2.521260e-19
 2.100000e+3	2.496200e-19
 2.600000e+3	2.443540e-19
 3.100000e+3	2.400980e-19
 3.700000e+3	2.358920e-19
 6.200000e+3	2.240310e-19
 7.400000e+3	2.201040e-19
 8.800000e+3	2.163240e-19
 1.000000e+4	2.135770e-19
-----------------------------

"""

cs = parse_string(string)

@test cs.type.projectile == "Ar^+" 
@test cs.type.target == "Ar" 

#TODO: maybe add newlines to the comments?
@test cs.comment == "Ar+ in Ar: Phelps, J. Appl. Phys. 76, 747 (1994).0.5*(1.15E-18*(1.+0.015/2./col(A))^0.6/(2.*col(A))^0.1-2E-19/(2.*col(A))^0.5/(1.+2.*col(A))-3E-19*2.*col(A)/(1.+2.*col(A)/3.)^2.3)."
@test cs.updated == DateTime("2011-10-30T07:03:24")
@test cs.cross_section(8800.) â‰ˆ 2.163240e-19
